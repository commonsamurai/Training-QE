import React, { useState } from "react";
import { register } from "../Service/AdmissionService";
function AssociateRegistration(){

    const [state, setState] = useState({
     
      courseId: "",
      associateId:"",
      message:''
  
    });
   
    const handleInputChange = (event) => {
      const { name, value } = event.target;
      setState((prevProps) => ({
        ...prevProps,
        [name]: value
      }));
    };
  
    const handleSubmit = (event) => {
    //   var str=validation();
    //   console.log("Str",str);
    //   if(str != '') {
        // setState({ message: str});
        // throw new Error(str);
    //   }else{
        console.log("inside else")
          register(state.associateId,state.courseId).then(data => {
            console.log("add ",data);
            setState({ message: 'Registered successfully, Your registration id: '+data});
          })
          .catch((err) => { 
            console.log(err)
            setState({ message: err});
      
          });
    //  }
      event.preventDefault();
      console.log(state.message);
    };  
    const validation=()=> {	 	  	  		    	   	 	   	 	
      // var d:any = 
      var str='';
  
      if(state.courseId == undefined || state.courseId.length <= 0) {
        str += 'Provide value for course id ';
      }
      if(state.associateId == undefined || state.associateId.length <= 0) {
        str += 'Provide value for associate Id';
      }
    
     return str;
      
    }
  
    return (
      <div className="main">
        <h3>Associate Registration Form</h3>
  
        <form onSubmit={handleSubmit}>
          {/* <div className="form-control">
            <label>Registration Id</label>
            <input type="text"  id="registrationId" name="registrationId" value={state.registrationId} onChange={handleInputChange}/>
          </div> */}	 	  	  		    	   	 	   	 	

          <div className="form-control">
            <label>Course Id</label>
            <input type="text"  id="courseId" name="courseId" value={state.courseId} onChange={handleInputChange}/>
          </div>
          
          <div className="form-control">
            <label>Associate Id</label>
            <input type="text"  id="associateId" name="associateId" value={state.associateId} onChange={handleInputChange}/>
          </div>
          
          {/* <div className="form-control">
            <label>Fees</label>
            <input type="number" id="fees" name="fees"  value={state.fees} onChange={handleInputChange}/>
          </div>      */}
         
          
            <button id="submit" type="submit" style={{alignContent:"center"}} onClick={handleSubmit}>Register Now</button>
         
        </form>
        <br></br>
                       <div id="message" style={{color:"yellow"}}>{state.message}</div>
      </div>
    );
  }
  
  
  export default AssociateRegistration;
  	 	  	  		    	   	 	   	 	
