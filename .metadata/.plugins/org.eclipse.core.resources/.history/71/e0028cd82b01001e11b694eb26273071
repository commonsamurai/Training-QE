import React, { useState } from "react";
import { addAssociate } from "../Service/AssociateService";
function AddAssociate(){
  const [message, setMessage] = useState("");
  const [state, setState] = useState({
    associateId: "",
    associateName: "",
    associateAddress:"",
    associateEmailId:""  
  });
 
  const handleInputChange = (event) => {
    const { name, value } = event.target;
    setState((prevProps) => ({
      ...prevProps,
      [name]: value
    }));
  };

  const handleSubmit = (event) => {
    // var str=validation();
    // if(str != '') {
    //   setState({ message: str});
    //   // throw new Error(str);
    // }else{
    addAssociate(state).then(data => {
      console.log("add course return data ",data);
      setState({ message: 'Associate has been added successfully'});
     })
     .catch((err) => { 
       console.log(err)
       setMessage( err);
    });
//   }
    event.preventDefault();
    console.log(state.message);
  };  

  const validation=()=> {	 	  	  		    	   	 	   	 	
    // var d:any = 
    var str='';

    if(state.associateId == undefined || state.associateId.length <= 0) {
      str += 'Provide value for appointment id ';
    }
    if(state.associateName == undefined || state.associateName.length <= 0) {
      str += 'Provide value for associate name ';
    }
    if(state.associateAddress == undefined || state.associateAddress.length <= 0) {
      str += 'Provide value for associate address';
    }
    if(state.associateEmailId == undefined || state.associateEmailId.length <= 0) {
      str += 'Provide value for associate emailID';
    }
  
    return str;
    
  }

  return (
    <div className="main">
      <h3>Add Associate Details</h3>

      <form onSubmit={handleSubmit}>
        <div className="form-control">
          <label>Associate Id</label>
          <input type="text"  id="associateId" name="associateId" value={state.associateId} onChange={handleInputChange}/>
        </div>

        <div className="form-control">
          <label>Name</label>
          <input type="text"  id="associateName" name="associateName" value={state.associateName} onChange={handleInputChange}/>
        </div>
        
        <div className="form-control">
          <label>Address</label>
          <input type="text"  id="associateAddress" name="associateAddress" value={state.associateAddress} onChange={handleInputChange}/>
        </div>

        <div className="form-control">
          <label>Email Id</label>
          <input type="text"  id="associateEmailId" name="associateEmailId" value={state.associateEmailId} onChange={handleInputChange}/>
        </div>
        
        
          <button id="submit" type="submit" style={{alignContent:"center"}} onClick={handleSubmit}>Add</button>
       
      </form>
      <br></br>
                     <div id="message" style={{color:"yellow"}}>{state.message}</div>
    </div>
  );
    }	 	  	  		    	   	 	   	 	
  export default AddAssociate;
  